[3314. æ„é€ æœ€å°ä½è¿ç®—æ•°ç»„ I - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/construct-the-minimum-bitwise-array-i/description/?envType=daily-question&envId=2026-01-20)

>æ ‡ç­¾ï¼šä½è¿ç®—  |  æ•°ç»„

# ä¸€ã€é¢˜ç›®æè¿°

ç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„è´¨æ•°æ•°ç»„ `nums` ã€‚ä½ çš„ä»»åŠ¡æ˜¯è¿”å›ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„æ•°ç»„ `ans` ï¼Œå¯¹äºæ¯ä¸ªä¸‹æ ‡ `i` ï¼Œä»¥ä¸‹ **æ¡ä»¶** å‡æˆç«‹ï¼š

- `ans[i] OR (ans[i] + 1) == nums[i]`

é™¤æ­¤ä»¥å¤–ï¼Œä½ éœ€è¦ **æœ€å°åŒ–** ç»“æœæ•°ç»„é‡Œæ¯ä¸€ä¸ª `ans[i]` ã€‚

å¦‚æœæ²¡æ³•æ‰¾åˆ°ç¬¦åˆ **æ¡ä»¶** çš„ `ans[i]` ï¼Œé‚£ä¹ˆ `ans[i] = -1` ã€‚

**è´¨æ•°** æŒ‡çš„æ˜¯ä¸€ä¸ªå¤§äº 1 çš„è‡ªç„¶æ•°ï¼Œä¸”å®ƒåªæœ‰ 1 å’Œè‡ªå·±ä¸¤ä¸ªå› æ•°ã€‚

 

**ç¤ºä¾‹ 1ï¼š**

**è¾“å…¥ï¼š**nums = [2,3,5,7]

**è¾“å‡ºï¼š**[-1,1,4,3]

**è§£é‡Šï¼š**

- å¯¹äº `i = 0` ï¼Œä¸å­˜åœ¨ `ans[0]` æ»¡è¶³ `ans[0] OR (ans[0] + 1) = 2` ï¼Œæ‰€ä»¥ `ans[0] = -1` ã€‚
- å¯¹äº `i = 1` ï¼Œæ»¡è¶³ `ans[1] OR (ans[1] + 1) = 3` çš„æœ€å° `ans[1]` ä¸º `1` ï¼Œå› ä¸º `1 OR (1 + 1) = 3` ã€‚
- å¯¹äº `i = 2` ï¼Œæ»¡è¶³ `ans[2] OR (ans[2] + 1) = 5` çš„æœ€å° `ans[2]` ä¸º `4` ï¼Œå› ä¸º `4 OR (4 + 1) = 5` ã€‚
- å¯¹äº `i = 3` ï¼Œæ»¡è¶³ `ans[3] OR (ans[3] + 1) = 7` çš„æœ€å° `ans[3]` ä¸º `3` ï¼Œå› ä¸º `3 OR (3 + 1) = 7` ã€‚

**ç¤ºä¾‹ 2ï¼š**

**è¾“å…¥ï¼š**nums = [11,13,31]

**è¾“å‡ºï¼š**[9,12,15]

**è§£é‡Šï¼š**

- å¯¹äº `i = 0` ï¼Œæ»¡è¶³ `ans[0] OR (ans[0] + 1) = 11` çš„æœ€å° `ans[0]` ä¸º `9` ï¼Œå› ä¸º `9 OR (9 + 1) = 11` ã€‚
- å¯¹äº `i = 1` ï¼Œæ»¡è¶³ `ans[1] OR (ans[1] + 1) = 13` çš„æœ€å° `ans[1]` ä¸º `12` ï¼Œå› ä¸º `12 OR (12 + 1) = 13` ã€‚
- å¯¹äº `i = 2` ï¼Œæ»¡è¶³ `ans[2] OR (ans[2] + 1) = 31` çš„æœ€å° `ans[2]` ä¸º `15` ï¼Œå› ä¸º `15 OR (15 + 1) = 31` ã€‚

 

**æç¤ºï¼š**

- `1 <= nums.length <= 100`
- `2 <= nums[i] <= 1000`
- `nums[i]` æ˜¯ä¸€ä¸ªè´¨æ•°ã€‚



# äºŒã€è§£é¢˜æ€è·¯

è¿™æ˜¯ä¸€é“ä½è¿ç®—ç›¸å…³çš„é¢˜ç›®ï¼Œé¡ºä¾¿å»çœ‹äº†çµç¥å…³äºä½è¿ç®—ç›¸å…³çš„æŠ€å·§çš„å¸–å­ï¼Œå†™çš„éå¸¸å¥½ï¼Œç®€ç›´æ˜¯åšé¢˜å…šçš„ç¦éŸ³ï¼Œç½‘å€ä¸ºâ€”â€”[åˆ†äº«ï½œä»é›†åˆè®ºåˆ°ä½è¿ç®—ï¼Œå¸¸è§ä½è¿ç®—æŠ€å·§åˆ†ç±»æ€»ç»“ï¼ - è®¨è®º - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/discuss/post/3571304/cong-ji-he-lun-dao-wei-yun-suan-chang-ji-enve/)ï¼Œä¸‹è¿°æ˜¯å¯¹åº”çš„å›¾ç‰‡ï¼Œæ˜¯ä¸€ä½ç½‘å‹æ…·æ…¨èµ ä¸ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼

![3314_æ„é€ æœ€å°ä½è¿ç®—æ•°ç»„ I_ä½è¿ç®—æŠ€å·§]()

## ğŸ”‘ æ ¸å¿ƒè§‚å¯Ÿ

- `y | (y+1)` çš„ç»“æœï¼š**äºŒè¿›åˆ¶æœ«å°¾æ˜¯ä¸€ä¸²è¿ç»­çš„ 1**ã€‚
- åè¿‡æ¥ï¼Œç»™å®š `x`ï¼Œè‹¥å…¶**æœ€ä½ä½æ˜¯ 0**ï¼ˆå³ `x` æ˜¯å¶æ•°ä¸”ä¸æ˜¯å…¨1ç»“æ„ï¼‰ï¼Œåˆ™å¯èƒ½æ— è§£ã€‚
- **æœ‰è§£ â‡¨ `x` çš„äºŒè¿›åˆ¶è‡³å°‘æœ‰ä¸€ä¸ªæœ«å°¾ 1ï¼Œä¸”åœ¨ç¬¬ä¸€ä¸ª 0 ä¹‹å‰å…¨æ˜¯ 1**ã€‚

âœ… å®é™…è§„å¾‹ï¼š

- è‹¥ `x` æ˜¯ **2 çš„å¹‚ï¼ˆå¦‚ 2, 4, 8...ï¼‰ä¸” x > 1** â†’ **æ— è§£ï¼ˆè¿”å› -1ï¼‰**
- å¦åˆ™ï¼Œ**`y = x - lowbit(x)`**ï¼Œå…¶ä¸­ `lowbit(x)` æ˜¯ `x` æœ€ä½ä½çš„ 1 å¯¹åº”çš„å€¼ï¼ˆå¦‚ `lowbit(5)=1`, `lowbit(6)=2`ï¼‰

> ç‰¹ä¾‹ï¼š`x = 1` â†’ `y = 0`ï¼ˆæœ‰æ•ˆï¼‰

---

## ğŸ’¡ ç®—æ³•æ€è·¯ï¼ˆä»£ç é€»è¾‘ï¼‰

```cpp
for each x in nums:
    flag = 1, res = -1
    while (x & flag) != 0:     // ä»æœ€ä½ä½å¼€å§‹ï¼Œåªè¦å½“å‰ä½æ˜¯1
        res = x - flag         // å°è¯•æŠŠè¿™ä¸€ä½å˜0
        flag <<= 1             // ç§»åˆ°ä¸‹ä¸€ä½
    arr[i] = res               // é‡åˆ°ç¬¬ä¸€ä¸ª0ä½å°±åœï¼Œres å³ä¸ºç­”æ¡ˆ
```

- å¦‚æœ `x` æœ€ä½ä½å°±æ˜¯ 0ï¼ˆå¦‚ `x=2=10`ï¼‰ï¼Œå¾ªç¯ä¸æ‰§è¡Œ â†’ `res = -1`
- å¦åˆ™ï¼Œ`res` ä¼šæ˜¯ `x - æœ€åä¸€ä¸ªè¿ç»­1ä¸­çš„æœ€ä½ä½`

---

## âœ… ç»“è®º

- **æœ‰æ•ˆå½“ä¸”ä»…å½“ `x` çš„äºŒè¿›åˆ¶æœ«å°¾æœ‰è¿ç»­ 1ï¼ˆå³ `x & 1 == 1` æˆ–ä¸­é—´æœ‰1ï¼‰**
- **æœ€ç®€æ„é€ ï¼š`y = x - (x & -x)`**ï¼ˆ`x & -x` å³ lowbitï¼‰
- ä½†éœ€æ³¨æ„ï¼šè‹¥ `x` æ˜¯ 2 çš„å¹‚ä¸” `x > 1`ï¼Œåˆ™æ— è§£ï¼ˆå› ä¸º `y | (y+1) â‰  x`ï¼‰

> âš ï¸ ä½ çš„ä»£ç æ­£ç¡®ï¼Œå› ä¸ºå®ƒåªåœ¨é‡åˆ°è¿ç»­ä½ä½ 1 æ—¶æ‰æ›´æ–° `res`ï¼Œå¦åˆ™ä¿ç•™ `-1`ã€‚

---

âœ… **ä¸€å¥è¯æ€»ç»“**ï¼š  
**ä»ä½åˆ°é«˜æ‰¾è¿ç»­çš„ 1ï¼ŒæŠŠæœ€åä¸€ä¸ª 1 æ¸…é›¶å¾—åˆ° yï¼›è‹¥æœ€ä½ä½å°±æ˜¯ 0ï¼Œæ— è§£ã€‚**



# ä¸‰ã€ä»£ç æ¼”ç¤º

## Javaä»£ç 

```Java
class Solution {
    public int[] minBitwiseArray(List<Integer> nums) {
        int n = nums.size();
        int[] arr = new int[n];
        for (int i = 0; i < n; i++) {
            int tmp = nums.get(i);
            int res = -1, flag = 1;
            while ((tmp & flag) != 0) {
                res = tmp - flag;
                flag <<= 1;
            }
            arr[i] = res;
        }
        return arr;
    }
}
```



## Pythonä»£ç 

```Python
class Solution:
    def minBitwiseArray(self, nums: List[int]) -> List[int]:
        n = len(nums)
        arr = [0] * n
        for i in range(n):
            tmp, res, flag = nums[i], -1, 1
            while (tmp & flag) != 0 :
                res = tmp - flag
                flag <<= 1
            arr[i] = res
        return arr
```



## C++ä»£ç 

```C++
class Solution {
public:
    vector<int> minBitwiseArray(vector<int>& nums) {
        int n = nums.size();
        vector<int> arr(n);
        for (int i = 0; i < n; i++) {
            int tmp = nums[i];
            int res = -1, flag = 1;
            while ((tmp & flag) != 0) {
                res = tmp - flag;
                flag <<= 1;
            }
            arr[i] = res;
        }
        return arr;
    }
};
```

![3314_æ„é€ æœ€å°ä½è¿ç®—æ•°ç»„ I_C++]()