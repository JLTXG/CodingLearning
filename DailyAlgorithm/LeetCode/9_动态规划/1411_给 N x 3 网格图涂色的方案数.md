[1411. 给 N x 3 网格图涂色的方案数 - 力扣（LeetCode）](https://leetcode.cn/problems/number-of-ways-to-paint-n-3-grid/?envType=daily-question&envId=2026-01-03)

>标签：动态规划

# 一、题目描述

你有一个 `n x 3` 的网格图 `grid` ，你需要用 **红，黄，绿** 三种颜色之一给每一个格子上色，且确保相邻格子颜色不同（也就是有相同水平边或者垂直边的格子颜色不同）。

给你网格图的行数 `n` 。

请你返回给 `grid` 涂色的方案数。由于答案可能会非常大，请你返回答案对 `10^9 + 7` 取余的结果。

 

**示例 1：**

```
输入：n = 1
输出：12
解释：总共有 12 种可行的方法：
```

![1411_给 N x 3 网格图涂色的方案数](https://gitee.com/lei-weijun/CodingLearning/raw/main/DailyAlgorithm/LeetCode/9_%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/Images/1411_%E7%BB%99%20N%20x%203%20%E7%BD%91%E6%A0%BC%E5%9B%BE%E6%B6%82%E8%89%B2%E7%9A%84%E6%96%B9%E6%A1%88%E6%95%B0.png)

**示例 2：**

```
输入：n = 2
输出：54
```

**示例 3：**

```
输入：n = 3
输出：246
```

**示例 4：**

```
输入：n = 7
输出：106494
```

**示例 5：**

```
输入：n = 5000
输出：30228214
```

 

**提示：**

- `n == grid.length`
- `grid[i].length == 3`
- `1 <= n <= 5000`



# 二、解题思路\解题过程

这道题是一道困难题，但是这道题可以通过找规律的方式进行求解，话不多说，下述图片是对应的规律寻找过程：

![1411_给 N x 3 网格图涂色的方案数_思路图解](https://gitee.com/lei-weijun/CodingLearning/raw/main/DailyAlgorithm/LeetCode/9_%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/Images/1411_%E7%BB%99%20N%20x%203%20%E7%BD%91%E6%A0%BC%E5%9B%BE%E6%B6%82%E8%89%B2%E7%9A%84%E6%96%B9%E6%A1%88%E6%95%B0_%E6%80%9D%E8%B7%AF%E5%9B%BE%E8%A7%A3.jpg)

代码如下：

```java
class Solution {
    public int numOfWays(int n) {
        //  n = 1 的情况
        long twoColor = 6, threeColor = 6, sum = 0, mod = 1000000007l;
        //  n >= 2的情况
        for(int i = 2; i <= n; i++){
            long currentTwo = twoColor, currentThree = threeColor;
            twoColor = (currentTwo * 3 + currentThree * 2) % mod;
            threeColor = (currentTwo * 2 + currentThree * 2) % mod;
        }
        return (int)((twoColor + threeColor) % mod);
    }
}
```

# 三、代码演示

## Java代码

```java
class Solution {
    public int numOfWays(int n) {
        //  n = 1 的情况
        long twoColor = 6, threeColor = 6, mod = 1000000007l;
        //  n >= 2的情况
        for(int i = 2; i <= n; i++){
            long currentTwo = twoColor, currentThree = threeColor;
            twoColor = (currentTwo * 3 + currentThree * 2) % mod;
            threeColor = (currentTwo * 2 + currentThree * 2) % mod;
        }
        return (int)((twoColor + threeColor) % mod);
    }
}
```



## Python代码

```Python
class Solution:
    def numOfWays(self, n: int) -> int:
        two_color, three_color, mod = 6, 6, 1000000007
        for i in range(2, n + 1, 1):
            current_two, current_three = two_color, three_color
            two_color = (current_two * 3 + current_three * 2) % mod
            three_color = (current_two * 2 + current_three * 2) % mod
        return ((two_color + three_color) % mod)
```

![1411_给 N x 3 网格图涂色的方案数_Python](https://gitee.com/lei-weijun/CodingLearning/raw/main/DailyAlgorithm/LeetCode/9_%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/Images/1411_%E7%BB%99%20N%20x%203%20%E7%BD%91%E6%A0%BC%E5%9B%BE%E6%B6%82%E8%89%B2%E7%9A%84%E6%96%B9%E6%A1%88%E6%95%B0_Python.png)

## C++代码

```C++
class Solution {
public:
    int numOfWays(int n) {
        //  n = 1 的情况
        long twoColor = 6, threeColor = 6, mod = 1000000007l;
        //  n >= 2 的情况
        for(int i = 2; i <= n; i++){
            long currentTwo = twoColor, currentThree = threeColor;
            twoColor = (currentTwo * 3 + currentThree * 2) % mod;
            threeColor = (currentTwo * 2 + currentThree * 2) % mod;
        }
        return (int)((twoColor + threeColor) % mod);
    }
};
```

![1411_给 N x 3 网格图涂色的方案数_C++](https://gitee.com/lei-weijun/CodingLearning/raw/main/DailyAlgorithm/LeetCode/9_%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/Images/1411_%E7%BB%99%20N%20x%203%20%E7%BD%91%E6%A0%BC%E5%9B%BE%E6%B6%82%E8%89%B2%E7%9A%84%E6%96%B9%E6%A1%88%E6%95%B0_C++.png)
