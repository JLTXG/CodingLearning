æœ¬æ–‡é¢˜è§£åŸºäºä»¥ä¸‹åŸé¢˜æ•´ç†ï¼Œé¢˜æ„ç»æœ¬äººé‡æ–°è¡¨è¿°ï¼Œè§£é¢˜æ€è·¯ä¸ä»£ç å‡ä¸ºåŸåˆ›æˆ–è½¬è½½ï¼Œä»…ç”¨äºä¸ªäººå­¦ä¹ ä¸äº¤æµï¼Œå®Œæ•´é¢˜ç›®è¯·åŠ¡å¿…æŸ¥é˜…å®˜æ–¹åŸé¢˜é“¾æ¥ï¼š[3315. æ„é€ æœ€å°ä½è¿ç®—æ•°ç»„ II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/construct-the-minimum-bitwise-array-ii/description/)

>æ ‡ç­¾ï¼šä½è¿ç®—  |  æ•°ç»„

# ä¸€ã€é¢˜ç›®æè¿°

## **é—®é¢˜æ¦‚æ‹¬**

ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º `n` çš„è´¨æ•°æ•°ç»„ `nums`ï¼ˆæ¯ä¸ªå…ƒç´ å‡ä¸ºå¤§äº1ä¸”åªæœ‰1å’Œè‡ªèº«ä¸¤ä¸ªå› æ•°çš„æ•´æ•°ï¼‰ã€‚å¯¹äºæ¯ä¸ªä¸‹æ ‡ `i`ï¼Œä½ éœ€è¦æ‰¾åˆ°ä¸€ä¸ªéè´Ÿæ•´æ•° `x`ï¼Œä½¿å¾— `x` ä¸ `(x + 1)` çš„æŒ‰ä½æˆ–ï¼ˆORï¼‰ç»“æœç­‰äº `nums[i]`ã€‚åœ¨æ»¡è¶³ç­‰å¼çš„æ‰€æœ‰å¯èƒ½ `x` ä¸­ï¼Œé€‰æ‹©æœ€å°çš„é‚£ä¸ªä½œä¸º `ans[i]`ï¼›å¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ `x`ï¼Œåˆ™è®¾ç½® `ans[i] = -1`ã€‚æœ€ç»ˆè¿”å›ç»“æœæ•°ç»„ `ans`ã€‚

## **ç¤ºä¾‹è¯´æ˜**

- **ç¤ºä¾‹1**ï¼š`nums = [2,3,5,7]`ï¼Œè®¡ç®—å¾—åˆ° `ans = [-1,1,4,3]`ã€‚
    - å¯¹äº `2`ï¼Œæ— è§£ï¼Œè¾“å‡º `-1`ã€‚
    - å¯¹äº `3`ï¼Œ`1 OR 2 = 3`ï¼Œæœ€å°è§£ä¸º `1`ã€‚
    - å¯¹äº `5`ï¼Œ`4 OR 5 = 5`ï¼Œæœ€å°è§£ä¸º `4`ã€‚
    - å¯¹äº `7`ï¼Œ`3 OR 4 = 7`ï¼Œæœ€å°è§£ä¸º `3`ã€‚
- **ç¤ºä¾‹2**ï¼š`nums = [11,13,31]`ï¼Œè®¡ç®—å¾—åˆ° `ans = [9,12,15]`ã€‚

## **æ•°æ®èŒƒå›´**

- æ•°ç»„é•¿åº¦ `n` æ»¡è¶³ `1 <= n <= 100`ã€‚
- æ¯ä¸ªè´¨æ•° `nums[i]` æ»¡è¶³ `2 <= nums[i] <= 10^9`ã€‚



# äºŒã€è§£é¢˜æ€è·¯\è§£é¢˜è¿‡ç¨‹

è¿™é“é¢˜ç›®å’Œä¸Šé“é¢˜ç›®â€”â€”[3314. æ„é€ æœ€å°ä½è¿ç®—æ•°ç»„ I - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/construct-the-minimum-bitwise-array-i/description/?envType=daily-question&envId=2026-01-20)â€”â€”å¥½åƒæ²¡æœ‰å¤šå¤§çš„åŒºåˆ«ï¼Œä¹Ÿæ˜¯ä½è¿ç®—ç›¸å…³çš„é¢˜ç›®ï¼

## ğŸ”‘ æ ¸å¿ƒè§‚å¯Ÿ

- `y | (y+1)` çš„ç»“æœï¼š**äºŒè¿›åˆ¶æœ«å°¾æ˜¯ä¸€ä¸²è¿ç»­çš„ 1**ã€‚
- åè¿‡æ¥ï¼Œç»™å®š `x`ï¼Œè‹¥å…¶**æœ€ä½ä½æ˜¯ 0**ï¼ˆå³ `x` æ˜¯å¶æ•°ä¸”ä¸æ˜¯å…¨1ç»“æ„ï¼‰ï¼Œåˆ™å¯èƒ½æ— è§£ã€‚
- **æœ‰è§£ â‡¨ `x` çš„äºŒè¿›åˆ¶è‡³å°‘æœ‰ä¸€ä¸ªæœ«å°¾ 1ï¼Œä¸”åœ¨ç¬¬ä¸€ä¸ª 0 ä¹‹å‰å…¨æ˜¯ 1**ã€‚

âœ… å®é™…è§„å¾‹ï¼š

- è‹¥ `x` æ˜¯ **2 çš„å¹‚ï¼ˆå¦‚ 2, 4, 8...ï¼‰ä¸” x > 1** â†’ **æ— è§£ï¼ˆè¿”å› -1ï¼‰**
- å¦åˆ™ï¼Œ**`y = x - lowbit(x)`**ï¼Œå…¶ä¸­ `lowbit(x)` æ˜¯ `x` æœ€ä½ä½çš„ 1 å¯¹åº”çš„å€¼ï¼ˆå¦‚ `lowbit(5)=1`, `lowbit(6)=2`ï¼‰

> ç‰¹ä¾‹ï¼š`x = 1` â†’ `y = 0`ï¼ˆæœ‰æ•ˆï¼‰

---

## ğŸ’¡ ç®—æ³•æ€è·¯ï¼ˆä»£ç é€»è¾‘ï¼‰

```cpp
for each x in nums:
    flag = 1, res = -1
    while (x & flag) != 0:     // ä»æœ€ä½ä½å¼€å§‹ï¼Œåªè¦å½“å‰ä½æ˜¯1
        res = x - flag         // å°è¯•æŠŠè¿™ä¸€ä½å˜0
        flag <<= 1             // ç§»åˆ°ä¸‹ä¸€ä½
    arr[i] = res               // é‡åˆ°ç¬¬ä¸€ä¸ª0ä½å°±åœï¼Œres å³ä¸ºç­”æ¡ˆ
```

- å¦‚æœ `x` æœ€ä½ä½å°±æ˜¯ 0ï¼ˆå¦‚ `x=2=10`ï¼‰ï¼Œå¾ªç¯ä¸æ‰§è¡Œ â†’ `res = -1`
- å¦åˆ™ï¼Œ`res` ä¼šæ˜¯ `x - æœ€åä¸€ä¸ªè¿ç»­1ä¸­çš„æœ€ä½ä½`

---

## âœ… ç»“è®º

- **æœ‰æ•ˆå½“ä¸”ä»…å½“ `x` çš„äºŒè¿›åˆ¶æœ«å°¾æœ‰è¿ç»­ 1ï¼ˆå³ `x & 1 == 1` æˆ–ä¸­é—´æœ‰1ï¼‰**
- **æœ€ç®€æ„é€ ï¼š`y = x - (x & -x)`**ï¼ˆ`x & -x` å³ lowbitï¼‰
- ä½†éœ€æ³¨æ„ï¼šè‹¥ `x` æ˜¯ 2 çš„å¹‚ä¸” `x > 1`ï¼Œåˆ™æ— è§£ï¼ˆå› ä¸º `y | (y+1) â‰  x`ï¼‰

> âš ï¸ ä½ çš„ä»£ç æ­£ç¡®ï¼Œå› ä¸ºå®ƒåªåœ¨é‡åˆ°è¿ç»­ä½ä½ 1 æ—¶æ‰æ›´æ–° `res`ï¼Œå¦åˆ™ä¿ç•™ `-1`ã€‚

---

âœ… **ä¸€å¥è¯æ€»ç»“**ï¼š  
**ä»ä½åˆ°é«˜æ‰¾è¿ç»­çš„ 1ï¼ŒæŠŠæœ€åä¸€ä¸ª 1 æ¸…é›¶å¾—åˆ° yï¼›è‹¥æœ€ä½ä½å°±æ˜¯ 0ï¼Œæ— è§£ã€‚**



# ä¸‰ã€ä»£ç æ¼”ç¤º

## Javaä»£ç 

```Java
class Solution {
    public int[] minBitwiseArray(List<Integer> nums) {
        int n = nums.size();
        int[] arr = new int[n];
        for (int i = 0; i < n; i++) {
            int tmp = nums.get(i);
            int res = -1, flag = 1;
            while ((tmp & flag) != 0) {
                res = tmp - flag;
                flag <<= 1;
            }
            arr[i] = res;
        }
        return arr;
    }
}
```



## Pythonä»£ç 

```Python
class Solution:
    def minBitwiseArray(self, nums: List[int]) -> List[int]:
        n = len(nums)
        arr = [0] * n
        for i in range(n):
            tmp, res, flag = nums[i], -1, 1
            while (tmp & flag) != 0 :
                res = tmp - flag
                flag <<= 1
            arr[i] = res
        return arr
```

![3315_æ„é€ æœ€å°ä½è¿ç®—æ•°ç»„ II_Python](https://gitee.com/lei-weijun/CodingLearning/raw/main/DailyAlgorithm/LeetCode/5_%E4%BD%8D%E8%BF%90%E7%AE%97/Images/3315_%E6%9E%84%E9%80%A0%E6%9C%80%E5%B0%8F%E4%BD%8D%E8%BF%90%E7%AE%97%E6%95%B0%E7%BB%84%20II_Python.png)

## C++ä»£ç 

```C++
class Solution {
public:
    vector<int> minBitwiseArray(vector<int>& nums) {
        int n = nums.size();
        vector<int> arr(n);  // ç”¨äºå­˜å‚¨æ¯ä¸ª nums[i] å¯¹åº”çš„ç­”æ¡ˆ y

        for (int i = 0; i < n; i++) {
            int tmp = nums[i];           // å½“å‰å¤„ç†çš„æ•° x
            int res = -1;                // åˆå§‹åŒ–ç­”æ¡ˆä¸º -1ï¼ˆè¡¨ç¤ºæš‚æ— è§£ï¼‰
            int flag = 1;                // flag è¡¨ç¤ºå½“å‰æ£€æŸ¥çš„äºŒè¿›åˆ¶ä½ï¼ˆä»æœ€ä½ä½å¼€å§‹ï¼š1, 2, 4, 8...ï¼‰

            // ä»æœ€ä½ä½ï¼ˆç¬¬0ä½ï¼‰å¼€å§‹ï¼Œå‘é«˜ä½æ‰«æ
            // åªè¦å½“å‰ä½æ˜¯ 1ï¼Œå°±ç»§ç»­ï¼›ä¸€æ—¦é‡åˆ° 0ï¼Œç«‹å³åœæ­¢
            while ((tmp & flag) != 0) {
                // å¦‚æœå½“å‰ä½æ˜¯ 1ï¼Œå°è¯•å°†è¿™ä¸€ä½ç½®ä¸º 0 å¾—åˆ°å€™é€‰ y
                // å³ï¼šy = x - flagï¼ˆå› ä¸º flag æ˜¯è¯¥ä½çš„æƒå€¼ï¼‰
                res = tmp - flag;

                // å°† flag å·¦ç§»ä¸€ä½ï¼Œæ£€æŸ¥ä¸‹ä¸€ä¸ªæ›´é«˜ä½
                flag <<= 1;
            }

            // å¾ªç¯ç»“æŸåï¼š
            // - å¦‚æœ tmp æœ€ä½ä½å°±æ˜¯ 0ï¼ˆå¦‚ tmp=2=10ï¼‰ï¼Œå¾ªç¯ä¸€æ¬¡éƒ½æ²¡è¿› â†’ res ä¿æŒ -1ï¼ˆæ— è§£ï¼‰
            // - å¦åˆ™ï¼Œres æ˜¯ x å‡å»æœ€åä¸€ä¸ªè¿ç»­ä½ä½ 1 çš„å€¼ï¼ˆå³æœ€å°åˆæ³• yï¼‰
            arr[i] = res;
        }

        return arr;
    }
};
```

