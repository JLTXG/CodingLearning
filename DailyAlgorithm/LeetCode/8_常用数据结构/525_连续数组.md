æœ¬æ–‡é¢˜è§£åŸºäºä»¥ä¸‹åŸé¢˜æ•´ç†ï¼Œé¢˜æ„ç»æœ¬äººé‡æ–°è¡¨è¿°ï¼Œè§£é¢˜æ€è·¯ä¸ä»£ç å‡ä¸ºåŸåˆ›æˆ–è½¬è½½ï¼Œä»…ç”¨äºä¸ªäººå­¦ä¹ ä¸äº¤æµï¼Œå®Œæ•´é¢˜ç›®è¯·åŠ¡å¿…æŸ¥é˜…å®˜æ–¹åŸé¢˜é“¾æ¥ï¼š[525. è¿ç»­æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/contiguous-array/description/)

>æ ‡ç­¾ï¼šæ•°ç»„  |  å“ˆå¸Œè¡¨  |  å‰ç¼€å’Œ

# ä¸€ã€é¢˜ç›®æè¿°

## **é—®é¢˜æ¦‚æ‹¬**

ç»™å®šä¸€ä¸ªä»…åŒ…å« 0 å’Œ 1 çš„æ•°ç»„ `nums`ï¼Œè¯·æ‰¾å‡ºæœ€é•¿çš„è¿ç»­å­æ•°ç»„ï¼Œä½¿å¾—è¯¥å­æ•°ç»„ä¸­ 0 å’Œ 1 çš„æ•°é‡ç›¸ç­‰ï¼Œå¹¶è¿”å›è¯¥å­æ•°ç»„çš„é•¿åº¦ã€‚

## **ç¤ºä¾‹è¯´æ˜**

- **ç¤ºä¾‹1**ï¼š`nums = [0,1]`ï¼Œæ•´ä¸ªæ•°ç»„å³ä¸ºæ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„ï¼Œé•¿åº¦ä¸º 2ã€‚
- **ç¤ºä¾‹2**ï¼š`nums = [0,1,0]`ï¼Œæœ€é•¿æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„ä¸º `[0,1]` æˆ– `[1,0]`ï¼Œé•¿åº¦ä¸º 2ã€‚
- **ç¤ºä¾‹3**ï¼š`nums = [0,1,1,1,1,1,0,0,0]`ï¼Œæœ€é•¿æ»¡è¶³æ¡ä»¶çš„å­æ•°ç»„ä¸º `[1,1,1,0,0,0]`ï¼Œé•¿åº¦ä¸º 6ã€‚

## **æ•°æ®èŒƒå›´**

- `1 <= nums.length <= 10^5`
- `nums[i]` ä¸º 0 æˆ– 1ã€‚



# äºŒã€è§£é¢˜æ€è·¯\è§£é¢˜è¿‡ç¨‹

## âœ… å¸¦è¯¦ç»†æ³¨é‡Šçš„ä»£ç 

```java
class Solution {
    public int findMaxLength(int[] nums) {
        int n = nums.length;
        
        // pre[i] è¡¨ç¤ºå‰ i ä¸ªå…ƒç´ ï¼ˆä¸‹æ ‡ 0 åˆ° i-1ï¼‰çš„â€œè½¬æ¢åâ€å‰ç¼€å’Œ
        // å®šä¹‰ï¼š0 â†’ -1ï¼Œ1 â†’ +1
        // è¿™æ ·ï¼Œå­æ•°ç»„ä¸­ 0 å’Œ 1 ä¸ªæ•°ç›¸ç­‰ â‡¨ å­æ•°ç»„å’Œä¸º 0
        int[] pre = new int[n + 1];
        
        // æ„å»ºå‰ç¼€å’Œæ•°ç»„ pre[0..n]
        for (int i = 0; i < n; i++) {
            // å°†åŸæ•°ç»„ä¸­çš„ 0 è½¬æ¢ä¸º -1ï¼Œ1 ä¿æŒä¸º 1
            int tmp = nums[i] == 0 ? -1 : 1;
            // pre[i+1] = pre[i] + å½“å‰è½¬æ¢å€¼
            pre[i + 1] = pre[i] + tmp;
        }
        
        // å“ˆå¸Œè¡¨ï¼šè®°å½•æ¯ä¸ªå‰ç¼€å’Œå€¼ç¬¬ä¸€æ¬¡å‡ºç°çš„ä¸‹æ ‡
        // key: å‰ç¼€å’Œå€¼ï¼Œvalue: è¯¥å€¼é¦–æ¬¡å‡ºç°çš„ç´¢å¼• iï¼ˆå¯¹åº” pre[i]ï¼‰
        Map<Integer, Integer> map = new HashMap<>();
        int result = 0; // æœ€é•¿å¹³è¡¡å­æ•°ç»„é•¿åº¦
        
        // éå†æ‰€æœ‰å‰ç¼€å’Œï¼ˆåŒ…æ‹¬ pre[0] = 0ï¼‰
        for (int i = 0; i <= n; i++) {
            int tmp = pre[i]; // å½“å‰å‰ç¼€å’Œ
            
            // å¦‚æœè¿™ä¸ªå‰ç¼€å’Œä¹‹å‰å‡ºç°è¿‡ï¼Œè¯´æ˜ä¸­é—´è¿™æ®µå­æ•°ç»„å’Œä¸º 0
            // å³ï¼špre[i] == pre[j] â‡’ sum(nums[j..i-1]) = 0 â‡’ 0 å’Œ 1 ä¸ªæ•°ç›¸ç­‰
            if (map.containsKey(tmp)) {
                // æ›´æ–°æœ€å¤§é•¿åº¦ï¼šå½“å‰ç´¢å¼• i - ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼• j
                result = Math.max(result, i - map.get(tmp));
            } else {
                // åªè®°å½•ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ï¼Œä»¥ä¿è¯åç»­æ‰¾åˆ°çš„å­æ•°ç»„å°½å¯èƒ½é•¿
                map.put(tmp, i);
            }
        }
        
        return result;
    }
}
```

------

## ğŸ§  æ ¸å¿ƒè§£é¢˜æ€æƒ³åˆ†æ

### ğŸ” é—®é¢˜ç›®æ ‡ï¼š

æ‰¾ä¸€ä¸ªæœ€é•¿çš„è¿ç»­å­æ•°ç»„ï¼Œä½¿å¾—å…¶ä¸­ **0 çš„ä¸ªæ•° = 1 çš„ä¸ªæ•°**ã€‚

> ä¾‹å¦‚ï¼š`[0,1]`ã€`[0,1,0,1]`ã€`[1,0,0,1]` éƒ½æ˜¯åˆæ³•çš„ã€‚

------

### ğŸ’¡ æ ¸å¿ƒæ´å¯Ÿï¼š**è½¬åŒ–ä¸ºâ€œå­æ•°ç»„å’Œä¸º 0â€é—®é¢˜**

å¦‚æœæˆ‘ä»¬æŠŠï¼š

- `0` çœ‹ä½œ `-1`
- `1` çœ‹ä½œ `+1`

é‚£ä¹ˆï¼š

> **å­æ•°ç»„ä¸­ 0 å’Œ 1 ä¸ªæ•°ç›¸ç­‰ â‡¨ å­æ•°ç»„çš„å’Œä¸º 0**

è¿™å°±å˜æˆäº†ä¸€ä¸ªç»å…¸é—®é¢˜ï¼š**æ‰¾æœ€é•¿çš„å­æ•°ç»„ï¼Œå…¶å’Œä¸º 0**ã€‚

------

### ğŸ”„ å¦‚ä½•é«˜æ•ˆæ‰¾â€œå’Œä¸º 0â€çš„æœ€é•¿å­æ•°ç»„ï¼Ÿ

ä½¿ç”¨ **å‰ç¼€å’Œ + å“ˆå¸Œè¡¨**ï¼š

- å®šä¹‰ `pre[i] = nums[0] + nums[1] + ... + nums[i-1]`ï¼ˆè½¬æ¢åï¼‰

- è‹¥å­˜åœ¨ `j < i` ä½¿å¾— `pre[j] == pre[i]`ï¼Œåˆ™ï¼š

    ```
    pre[i] - pre[j] = 0 â‡’ å­æ•°ç»„ nums[j..i-1] çš„å’Œä¸º 0
    ```

- è¦ä½¿å­æ•°ç»„æœ€é•¿ â‡’ å¯¹æ¯ä¸ªå‰ç¼€å’Œå€¼ï¼Œ**åªè®°å½•å®ƒç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®**

> âœ… ä¸ºä»€ä¹ˆåªå­˜ç¬¬ä¸€æ¬¡ï¼Ÿ
> å› ä¸º `i - j` è¦æœ€å¤§ï¼Œ`j` è¶Šå°è¶Šå¥½ï¼

------

### ğŸŒ° ä¸¾ä¸ªä¾‹å­ï¼š

è¾“å…¥ï¼š`nums = [0, 1, 0, 0, 1, 1, 0]`

è½¬æ¢åï¼š`[-1, +1, -1, -1, +1, +1, -1]`

å‰ç¼€å’Œ `pre`ï¼š

```
pre[0] = 0
pre[1] = -1
pre[2] = 0   â† ä¸ pre[0] ç›¸åŒ â‡’ å­æ•°ç»„ [0,1] é•¿åº¦=2
pre[3] = -1  â† ä¸ pre[1] ç›¸åŒ â‡’ [1,2] é•¿åº¦=2
pre[4] = -2
pre[5] = -1  â† ä¸ pre[1] ç›¸åŒ â‡’ [1,4] é•¿åº¦=4
pre[6] = 0   â† ä¸ pre[0] ç›¸åŒ â‡’ [0,5] é•¿åº¦=6
pre[7] = -1  â† ä¸ pre[1] ç›¸åŒ â‡’ [1,6] é•¿åº¦=6
```

æœ€å¤§é•¿åº¦ = 6ï¼ˆå­æ•°ç»„ `[1,0,0,1,1,0]`ï¼‰

------

### â±ï¸ å¤æ‚åº¦åˆ†æï¼š

- **æ—¶é—´å¤æ‚åº¦**ï¼šO(n) â€”â€” ä¸¤æ¬¡éå†æ•°ç»„
- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n) â€”â€” å‰ç¼€å’Œæ•°ç»„ + å“ˆå¸Œè¡¨

> ğŸ’¡ ä¼˜åŒ–æç¤ºï¼šå…¶å®å¯ä»¥ä¸ç”¨ `pre` æ•°ç»„ï¼Œç”¨ä¸€ä¸ªå˜é‡ `sum` ä»£æ›¿ï¼Œç©ºé—´å¯é™è‡³ O(n)ï¼ˆå“ˆå¸Œè¡¨ä»éœ€ O(n)ï¼‰ã€‚

------

## ğŸ“š ç¬”è®°æ€»ç»“

### ğŸ§© é—®é¢˜å®šä¹‰ï¼š

æ‰¾æœ€é•¿è¿ç»­å­æ•°ç»„ï¼Œä½¿å¾—å…¶ä¸­ **0 çš„ä¸ªæ•° = 1 çš„ä¸ªæ•°**ã€‚

### ğŸ’¡ æ ¸å¿ƒæ€æƒ³ï¼š

> **æ•°å€¼è½¬æ¢ + å‰ç¼€å’Œ + å“ˆå¸Œè¡¨**

#### å…³é”®è½¬åŒ–ï¼š

- å°† `0 â†’ -1`ï¼Œ`1 â†’ +1`
- é—®é¢˜è½¬åŒ–ä¸ºï¼š**æ‰¾æœ€é•¿å­æ•°ç»„ï¼Œå…¶å’Œä¸º 0**

#### ç®—æ³•æ­¥éª¤ï¼š

1. è®¡ç®—å‰ç¼€å’Œæ•°ç»„ `pre`ï¼Œå…¶ä¸­ `pre[0] = 0`ï¼›
2. ç”¨å“ˆå¸Œè¡¨è®°å½•æ¯ä¸ªå‰ç¼€å’Œ**ç¬¬ä¸€æ¬¡å‡ºç°çš„ä¸‹æ ‡**ï¼›
3. è‹¥å½“å‰å‰ç¼€å’Œå·²å­˜åœ¨ï¼Œåˆ™ `i - firstIndex` æ˜¯ä¸€ä¸ªå€™é€‰é•¿åº¦ï¼›
4. æ›´æ–°æœ€å¤§é•¿åº¦ã€‚

### ğŸ”‘ å…³é”®æŠ€å·§ï¼š

- **åˆå§‹åŒ–éšå«æ¡ä»¶**ï¼š`pre[0] = 0` å¯¹åº”ç©ºå­æ•°ç»„ï¼Œå¿…é¡»è€ƒè™‘ï¼›
- **åªå­˜é¦–æ¬¡å‡ºç°ä½ç½®**ï¼šä¿è¯å­æ•°ç»„é•¿åº¦æœ€å¤§ï¼›
- **å­æ•°ç»„èŒƒå›´**ï¼š`[j, i-1]` å¯¹åº” `pre[i] - pre[j]`ã€‚

### â±ï¸ å¤æ‚åº¦ï¼š

- æ—¶é—´ï¼šO(n)
- ç©ºé—´ï¼šO(n)

### ğŸ’¡ å»¶ä¼¸åº”ç”¨ï¼š

æ­¤æ¨¡å¼é€‚ç”¨äºæ‰€æœ‰â€œæ‰¾å’Œä¸º K çš„æœ€é•¿/æœ€çŸ­å­æ•°ç»„â€é—®é¢˜ï¼ˆå¦‚ LeetCode 325ã€560 ç­‰ï¼‰ã€‚

---

# ä¸‰ã€ä»£ç æ¼”ç¤º

## Javaä»£ç 

```Java
class Solution {
    public int findMaxLength(int[] nums) {
        int n = nums.length;
        int[] pre = new int[n + 1];
        for (int i = 0; i < n; i++) {
            int tmp = nums[i] == 0 ? -1 : 1;
            pre[i + 1] = pre[i] + tmp;
        }
        Map<Integer, Integer> map = new HashMap<>();
        int result = 0;
        for (int i = 0; i <= n; i++) {
            int tmp = pre[i];
            if (map.containsKey(tmp)) {
                result = Math.max(result, i - map.get(tmp));
            } else {
                map.put(tmp, i);
            }
        }
        return result;
    }
}
```

![525_è¿ç»­æ•°ç»„_Java](https://gitee.com/lei-weijun/CodingLearning/raw/main/DailyAlgorithm/LeetCode/8_%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/Images/525_%E8%BF%9E%E7%BB%AD%E6%95%B0%E7%BB%84_Java.png)

## Pythonä»£ç 

```python
class Solution:
    def findMaxLength(self, nums: List[int]) -> int:
        # æŠŠ 0 å½“ä½œ -1
        nums = [1 if x else -1 for x in nums]

        # è®¡ç®— nums çš„å‰ç¼€å’Œ
        pre = list(accumulate(nums, initial=0))

        pre_map = {}
        result = 0
        for i, tmp in enumerate(pre):
            if tmp in pre_map:
                result = max(result, i - pre_map[tmp])
            else:
                pre_map[tmp] = i
        return result
```



## C++ä»£ç 

```c++
class Solution {
public:
    int findMaxLength(vector<int>& nums) {
        int n = nums.size();
        vector<int> pre(n + 1);
        for (int i = 0; i < n; i++) {
            int tmp = nums[i] == 0 ? -1 : 1;
            pre[i + 1] = pre[i] + tmp;
        }
        map<int, int> preMap;
        int result = 0;
        for (int i = 0; i <= n; i++) {
            int tmp = pre[i];
            if (preMap.find(tmp) != preMap.end()) {
                result = max(result, i - preMap[tmp]);
            } else {
                preMap[tmp] = i;
            }
        }
        return result;
    }
};
```

