æœ¬æ–‡é¢˜è§£åŸºäºä»¥ä¸‹åŸé¢˜æ•´ç†ï¼Œé¢˜æ„ç»æœ¬äººé‡æ–°è¡¨è¿°ï¼Œè§£é¢˜æ€è·¯ä¸ä»£ç å‡ä¸ºåŸåˆ›æˆ–è½¬è½½ï¼Œä»…ç”¨äºä¸ªäººå­¦ä¹ ä¸äº¤æµï¼Œå®Œæ•´é¢˜ç›®è¯·åŠ¡å¿…æŸ¥é˜…å®˜æ–¹åŸé¢˜é“¾æ¥ï¼š[2976. è½¬æ¢å­—ç¬¦ä¸²çš„æœ€å°æˆæœ¬ I - åŠ›æ‰£ï¼ˆLeetCodeï¼‰](https://leetcode.cn/problems/minimum-cost-to-convert-string-i/?envType=daily-question&envId=2026-01-29)

>æ ‡ç­¾ï¼šå›¾  |  æ•°ç»„  |  å­—ç¬¦ä¸²  |  æœ€çŸ­è·¯

# ä¸€ã€é¢˜ç›®æè¿°

## **é—®é¢˜æ¦‚æ‹¬**

ç»™å®šä¸¤ä¸ªé•¿åº¦ç›¸ç­‰çš„å­—ç¬¦ä¸² `source` å’Œ `target`ï¼Œå‡ç”±å°å†™å­—æ¯ç»„æˆã€‚åŒæ—¶ç»™å‡ºä¸€ç»„å­—ç¬¦è½¬æ¢è§„åˆ™ï¼Œæ¯æ¡è§„åˆ™ç”±ä¸‰å…ƒç»„ `(original[i], changed[i], cost[i])` è¡¨ç¤ºï¼Œæ„ä¸ºå¯ä»¥å°†å­—ç¬¦ `original[i]` ç›´æ¥è½¬æ¢ä¸º `changed[i]`ï¼Œå¹¶èŠ±è´¹ `cost[i]` çš„æˆæœ¬ã€‚ä½ å¯ä»¥å¯¹å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦ç‹¬ç«‹åœ°è¿›è¡Œè½¬æ¢æ“ä½œï¼Œä¸”æ¯æ¬¡è½¬æ¢å¿…é¡»ä½¿ç”¨ç»™å®šçš„æŸæ¡è§„åˆ™ï¼ˆä½†å¯é€šè¿‡å¤šæ¬¡è½¬æ¢é—´æ¥åœ°å°†ä¸€ä¸ªå­—ç¬¦è½¬æ¢ä¸ºå¦ä¸€ä¸ªå­—ç¬¦ï¼‰ã€‚è¯·è®¡ç®—å°† `source` è½¬æ¢ä¸º `target`ï¼ˆå³æ¯ä¸ªä½ç½®ä¸Šçš„å­—ç¬¦åˆ†åˆ«è½¬æ¢ï¼‰æ‰€éœ€çš„æœ€å°æ€»æˆæœ¬ã€‚å¦‚æœæŸä¸ªä½ç½®çš„å­—ç¬¦æ— æ³•è½¬æ¢ï¼Œåˆ™è¿”å› `-1`ã€‚

## **ç¤ºä¾‹æ ¸å¿ƒè¯´æ˜**

- **ç¤ºä¾‹1**ï¼šé€šè¿‡ä¸€ç³»åˆ—ç›´æ¥è½¬æ¢ï¼Œæ€»æˆæœ¬ä¸º28ã€‚

```
è¾“å…¥ï¼šsource = "abcd", target = "acbe", original = ["a","b","c","c","e","d"], changed = ["b","c","b","e","b","e"], cost = [2,5,5,1,2,20]
è¾“å‡ºï¼š28
```

- **ç¤ºä¾‹2**ï¼šé€šè¿‡é—´æ¥è½¬æ¢ï¼ˆaâ†’câ†’bï¼‰ï¼Œæ¯ä¸ª `a` è½¬æ¢åˆ° `b` çš„æœ€å°æˆæœ¬ä¸º3ï¼Œå…±æœ‰4ä¸ªå­—ç¬¦ï¼Œæ€»æˆæœ¬12ã€‚

```
è¾“å…¥ï¼šsource = "aaaa", target = "bbbb", original = ["a","c"], changed = ["c","b"], cost = [1,2]
è¾“å‡ºï¼š12
```

- **ç¤ºä¾‹3**ï¼šç”±äº `d` æ— æ³•è½¬æ¢åˆ° `e`ï¼Œè¿”å› -1ã€‚

```
è¾“å…¥ï¼šsource = "abcd", target = "abce", original = ["a"], changed = ["e"], cost = [10000]
è¾“å‡ºï¼š-1
```

## **æ•°æ®èŒƒå›´**

- `source` å’Œ `target` çš„é•¿åº¦ï¼š`1 <= n <= 10^5`
- è§„åˆ™æ•°é‡ï¼š`1 <= cost.length <= 2000`
- `cost[i]` åœ¨ `1` åˆ° `10^6` ä¹‹é—´



# äºŒã€è§£é¢˜æ€è·¯\è§£é¢˜è¿‡ç¨‹

## âœ… ä¸€ã€è§£é¢˜æ€è·¯ä¸æ ¸å¿ƒæ€æƒ³ï¼ˆé€‚åˆåšç¬”è®°ï¼‰

### ğŸ” é¢˜ç›®æœ¬è´¨ï¼š

- ç»™ä½ ä¸¤ä¸ªç­‰é•¿å­—ç¬¦ä¸² `source` å’Œ `target`ã€‚
- ä½ å¯ä»¥é€šè¿‡ä¸€ç³»åˆ—**å­—ç¬¦æ›¿æ¢æ“ä½œ**æŠŠ `source` å˜æˆ `target`ã€‚
- æ¯æ¬¡æ“ä½œåªèƒ½æŒ‰ç»™å®šçš„è§„åˆ™ï¼šæŠŠæŸä¸ªå­—ç¬¦ `x` å˜æˆ `y`ï¼ŒèŠ±è´¹ `cost`ã€‚
- **å…è®¸é—´æ¥è½¬æ¢**ï¼ˆæ¯”å¦‚ aâ†’cï¼Œcâ†’bï¼Œé‚£ä¹ˆ a å¯ä»¥é€šè¿‡ c å˜æˆ bï¼‰ã€‚
- é—®ï¼š**æœ€å°æ€»èŠ±è´¹æ˜¯å¤šå°‘ï¼Ÿå¦‚æœä¸èƒ½å®Œæˆï¼Œè¿”å› -1ã€‚**

------

### ğŸ§  æ ¸å¿ƒæ€æƒ³ï¼š

> **æŠŠå­—ç¬¦çœ‹ä½œå›¾ä¸­çš„èŠ‚ç‚¹ï¼Œè½¬æ¢è§„åˆ™çœ‹ä½œæœ‰å‘è¾¹ï¼Œé—®é¢˜è½¬åŒ–ä¸ºï¼šæ±‚æ¯ä¸€å¯¹ (source[i], target[i]) çš„æœ€çŸ­è·¯å¾„ä¹‹å’Œã€‚**

#### æ­¥éª¤åˆ†è§£ï¼š

1. **å»ºå›¾**ï¼š
    - 26 ä¸ªå°å†™å­—æ¯ â†’ 26 ä¸ªèŠ‚ç‚¹ï¼ˆ0~25ï¼‰ã€‚
    - æ¯æ¡ `original[i] â†’ changed[i]` æ˜¯ä¸€æ¡æœ‰å‘è¾¹ï¼Œæƒé‡ä¸º `cost[i]`ã€‚
    - å¦‚æœæœ‰å¤šæ¡ç›¸åŒæ–¹å‘çš„è¾¹ï¼Œåªä¿ç•™**æˆæœ¬æœ€å°**çš„é‚£æ¡ã€‚
2. **æ±‚æ‰€æœ‰ç‚¹å¯¹çš„æœ€çŸ­è·¯å¾„**ï¼š
    - å› ä¸ºåªæœ‰ 26 ä¸ªèŠ‚ç‚¹ï¼Œ**Floyd-Warshall ç®—æ³•**éå¸¸åˆé€‚ï¼ˆæ—¶é—´å¤æ‚åº¦ O(26Â³) â‰ˆ 17,576ï¼Œæå°ï¼‰ã€‚
    - å¾—åˆ°ä¸€ä¸ª `dis[a][b]` è¡¨ï¼šè¡¨ç¤ºä»å­—ç¬¦ a åˆ° b çš„æœ€å°è½¬æ¢æˆæœ¬ã€‚
3. **éå†å­—ç¬¦ä¸²**ï¼š
    - å¯¹æ¯ä¸€ä½ `i`ï¼ŒæŸ¥ `dis[source[i]][target[i]]`ã€‚
    - å¦‚æœæŸä¸€ä½ä¸å¯è¾¾ï¼ˆå€¼ä¸º INFï¼‰ï¼Œç›´æ¥è¿”å› `-1`ã€‚
    - å¦åˆ™ç´¯åŠ æ‰€æœ‰ä½çš„æˆæœ¬ã€‚

------

### âš™ï¸ ä¸ºä»€ä¹ˆç”¨ Floyd-Warshallï¼Ÿ

- èŠ‚ç‚¹æ•°æå°‘ï¼ˆä»… 26ï¼‰ï¼Œé€‚åˆå…¨æºæœ€çŸ­è·¯å¾„ã€‚
- æ¯” Dijkstraï¼ˆå¯¹æ¯ä¸ªèµ·ç‚¹è·‘ä¸€æ¬¡ï¼‰æ›´ç®€æ´ï¼Œä»£ç çŸ­ï¼Œä¸”èƒ½å¤„ç†**è´Ÿæƒè¾¹**ï¼ˆè™½ç„¶æœ¬é¢˜æ²¡æœ‰ï¼‰ã€‚
- é¢„å¤„ç†ä¸€æ¬¡åï¼Œä»»æ„æŸ¥è¯¢ O(1)ã€‚

------

### ğŸ’¡ å…³é”®ç»†èŠ‚ï¼š

- INF ä¸èƒ½è®¾ä¸º `Integer.MAX_VALUE`ï¼Œå› ä¸º `dis[i][k] + dis[k][j]` ä¼šæº¢å‡ºå˜æˆè´Ÿæ•°ã€‚
    - æ‰€ä»¥ç”¨ `Integer.MAX_VALUE / 2` æ˜¯å®‰å…¨åšæ³•ã€‚
- **è‡ªç¯åˆå§‹åŒ–ä¸º 0**ï¼šå­—ç¬¦ä¸éœ€è¦å˜æ—¶æˆæœ¬ä¸º 0ã€‚
- **å­˜åœ¨é‡å¤è¾¹**ï¼šé¢˜ç›®è¯´æ˜å¯èƒ½æœ‰é‡å¤çš„ `(original[i], changed[i])`ï¼Œæ‰€ä»¥è¦ç”¨ `Math.min` ä¿ç•™æœ€å°æˆæœ¬ã€‚

------

### ğŸ“Œ æ—¶é—´ & ç©ºé—´å¤æ‚åº¦ï¼š

- **æ—¶é—´**ï¼šO(26Â³ + n)ï¼Œå…¶ä¸­ n æ˜¯å­—ç¬¦ä¸²é•¿åº¦ï¼ˆâ‰¤1e5ï¼‰ã€‚
- **ç©ºé—´**ï¼šO(26Â²) = O(1) â€”â€” å¸¸æ•°ç©ºé—´ã€‚

------

### âœ… æ€»ç»“ä¸€å¥è¯ï¼š

> **å°†å­—ç¬¦è½¬æ¢é—®é¢˜å»ºæ¨¡ä¸ºå›¾çš„æœ€çŸ­è·¯å¾„é—®é¢˜ï¼Œç”¨ Floyd ç®—æ³•é¢„å¤„ç†æ‰€æœ‰å­—ç¬¦é—´çš„æœ€å°è½¬æ¢ä»£ä»·ï¼Œå†é€ä½ç´¯åŠ å³å¯ã€‚**



# ä¸‰ã€ä»£ç æ¼”ç¤º

## Javaä»£ç 

```Java
class Solution {
    public long minimumCost(String source, String target, char[] original, char[] changed, int[] cost) {
        // å®šä¹‰ä¸€ä¸ªâ€œæ— ç©·å¤§â€çš„å€¼ï¼Œç”¨äºè¡¨è¾¾ä¸å¯è¾¾ã€‚ä¹‹æ‰€ä»¥é™¤ä»¥2ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢åç»­åŠ æ³•æº¢å‡ºï¼ˆæ¯”å¦‚ INF + INFï¼‰
        final int INF = Integer.MAX_VALUE / 2;

        // åˆ›å»ºä¸€ä¸ª 26 x 26 çš„äºŒç»´æ•°ç»„ disï¼Œä»£è¡¨ä»å­—ç¬¦ i åˆ°å­—ç¬¦ j çš„æœ€å°è½¬æ¢æˆæœ¬ï¼ˆi, j æ˜¯ 'a'~'z' çš„ç´¢å¼•ï¼‰
        int[][] dis = new int[26][26];

        // åˆå§‹åŒ–å›¾ï¼šæ¯ä¸ªå­—ç¬¦åˆ°è‡ªèº«çš„æˆæœ¬ä¸º0ï¼Œå…¶ä½™è®¾ä¸º INFï¼ˆè¡¨ç¤ºåˆå§‹æ—¶æ— æ³•ç›´æ¥è½¬æ¢ï¼‰
        for (int i = 0; i < 26; i++) {
            // å…ˆå…¨éƒ¨è®¾ä¸º INF
            Arrays.fill(dis[i], INF);
            // è‡ªå·±åˆ°è‡ªå·±ä¸éœ€è¦æˆæœ¬
            dis[i][i] = 0;
        }

        // æ ¹æ®é¢˜ç›®ç»™çš„è½¬æ¢è§„åˆ™ï¼Œæ„å»ºæœ‰å‘å›¾çš„è¾¹
        // original[i] -> changed[i] çš„æˆæœ¬æ˜¯ cost[i]
        for (int i = 0; i < cost.length; i++) {
            int x = original[i] - 'a';  // èµ·ç‚¹å­—ç¬¦è½¬æˆ 0~25 çš„ç´¢å¼•
            int y = changed[i] - 'a';   // ç»ˆç‚¹å­—ç¬¦è½¬æˆ 0~25 çš„ç´¢å¼•
            // å¦‚æœæœ‰å¤šæ¡ç›¸åŒçš„è¾¹ï¼ˆæ¯”å¦‚ a->b å‡ºç°å¤šæ¬¡ï¼‰ï¼Œåªä¿ç•™æˆæœ¬æœ€å°çš„é‚£æ¡
            dis[x][y] = Math.min(dis[x][y], cost[i]);
        }

        // Floyd-Warshall ç®—æ³•ï¼šè®¡ç®—æ‰€æœ‰å­—ç¬¦å¯¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„ï¼ˆå³æœ€å°è½¬æ¢æˆæœ¬ï¼‰
        // k æ˜¯ä¸­é—´èŠ‚ç‚¹ï¼Œå°è¯•é€šè¿‡ k æ¥ä¼˜åŒ– i -> j çš„è·¯å¾„
        for (int k = 0; k < 26; k++) {
            for (int i = 0; i < 26; i++) {
                // é‡è¦ä¼˜åŒ–ï¼šå¦‚æœ i æ— æ³•åˆ°è¾¾ kï¼Œå°±è·³è¿‡ï¼Œé¿å…æ— æ„ä¹‰çš„è®¡ç®—
                if (dis[i][k] == INF) {
                    continue;
                }
                for (int j = 0; j < 26; j++) {
                    // å°è¯•ç”¨ i -> k -> j æ˜¯å¦æ¯”å½“å‰ i -> j æ›´ä¾¿å®œ
                    dis[i][j] = Math.min(dis[i][j], dis[i][k] + dis[k][j]);
                }
            }
        }

        // å¼€å§‹è®¡ç®—å°† source è½¬æ¢æˆ target çš„æ€»æœ€å°æˆæœ¬
        long ans = 0;
        for (int i = 0; i < source.length(); i++) {
            char s = source.charAt(i);
            char t = target.charAt(i);

            // å¦‚æœ source[i] å’Œ target[i] ç›¸åŒï¼Œä¸éœ€è¦è½¬æ¢ï¼ˆdis[x][x] = 0ï¼Œä¸å½±å“ç»“æœï¼‰
            int d = dis[s - 'a'][t - 'a'];  // æŸ¥è¯¢æœ€å°è½¬æ¢æˆæœ¬

            // å¦‚æœæ— æ³•è½¬æ¢ï¼ˆæˆæœ¬ä»æ˜¯ INFï¼‰ï¼Œè¯´æ˜ä¸å¯èƒ½å®Œæˆï¼Œè¿”å› -1
            if (d == INF) {
                return -1;
            }

            ans += d;  // ç´¯åŠ æ¯ä¸€ä½çš„è½¬æ¢æˆæœ¬
        }

        return ans;  // è¿”å›æ€»æˆæœ¬
    }
}
```

![2976_è½¬æ¢å­—ç¬¦ä¸²çš„æœ€å°æˆæœ¬ I_Java]()

## Pythonä»£ç 

```Python
class Solution:
    def minimumCost(self, source: str, target: str, original: List[str], changed: List[str], cost: List[int]) -> int:
        INF = float('inf')  # Python ä¸­å¯ç”¨ float('inf')ï¼Œä¸ä¼šæº¢å‡º
        
        # åˆå§‹åŒ– 26x26 çš„è·ç¦»çŸ©é˜µ
        dis = [[INF] * 26 for _ in range(26)]
        
        # è‡ªå·±åˆ°è‡ªå·±æˆæœ¬ä¸º 0
        for i in range(26):
            dis[i][i] = 0
        
        # å»ºå›¾ï¼šæ·»åŠ æœ‰å‘è¾¹ï¼ˆä¿ç•™æœ€å°æˆæœ¬ï¼‰
        for i in range(len(cost)):
            x = ord(original[i]) - ord('a')
            y = ord(changed[i]) - ord('a')
            dis[x][y] = min(dis[x][y], cost[i])
        
        # Floyd-Warshall ç®—æ³•
        for k in range(26):
            for i in range(26):
                if dis[i][k] == INF:
                    continue  # ä¼˜åŒ–ï¼šè·³è¿‡ä¸å¯è¾¾çš„ä¸­é—´èŠ‚ç‚¹
                for j in range(26):
                    # æ›´æ–° i -> j çš„æœ€çŸ­è·¯å¾„
                    dis[i][j] = min(dis[i][j], dis[i][k] + dis[k][j])
        
        # è®¡ç®—æ€»æˆæœ¬
        total_cost = 0
        for i in range(len(source)):
            u = ord(source[i]) - ord('a')
            v = ord(target[i]) - ord('a')
            if dis[u][v] == INF:
                return -1  # æ— æ³•å®Œæˆè½¬æ¢
            total_cost += dis[u][v]
        
        return total_cost
```



## C++ä»£ç 

```C++
class Solution {
public:
    long long minimumCost(string source, string target, vector<char>& original, vector<char>& changed, vector<int>& cost) {
        const int INF = INT_MAX / 2; // é˜²æ­¢åŠ æ³•æº¢å‡º
        vector<vector<int>> dis(26, vector<int>(26, INF));

        // åˆå§‹åŒ–ï¼šæ¯ä¸ªå­—ç¬¦åˆ°è‡ªèº«æˆæœ¬ä¸º0
        for (int i = 0; i < 26; ++i) {
            dis[i][i] = 0;
        }

        // å»ºå›¾ï¼šæ·»åŠ æœ‰å‘è¾¹
        for (int i = 0; i < cost.size(); ++i) {
            int x = original[i] - 'a';
            int y = changed[i] - 'a';
            dis[x][y] = min(dis[x][y], cost[i]);
        }

        // Floyd-Warshall ç®—æ³•ï¼šæ±‚æ‰€æœ‰ç‚¹å¯¹æœ€çŸ­è·¯å¾„
        for (int k = 0; k < 26; ++k) {
            for (int i = 0; i < 26; ++i) {
                if (dis[i][k] == INF) continue; // ä¼˜åŒ–ï¼šè·³è¿‡ä¸å¯è¾¾çš„ä¸­é—´ç‚¹
                for (int j = 0; j < 26; ++j) {
                    dis[i][j] = min(dis[i][j], dis[i][k] + dis[k][j]);
                }
            }
        }

        long long ans = 0;
        for (int i = 0; i < source.size(); ++i) {
            int u = source[i] - 'a';
            int v = target[i] - 'a';
            if (dis[u][v] == INF) {
                return -1; // æ— æ³•è½¬æ¢
            }
            ans += dis[u][v];
        }

        return ans;
    }
};
```

